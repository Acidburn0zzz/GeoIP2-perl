language: perl
perl:
  - "5.18"
  - "5.16"
  - "5.14"
  - "5.12"
  - "5.10"
before_install:
  - cpanm --notest Devel::Cover::Report::Coveralls
  - git clone https://github.com/maxmind/libmaxminddb.git
  - cd libmaxminddb
  - ./bootstrap && ./configure && make && sudo make install
  - cd $TRAVIS_BUILD_DIR/..
  - git clone https://github.com/maxmind/MaxMind-DB-perl.git
  - cd $TRAVIS_BUILD_DIR
script:
  perl Makefile.PL build && cover -test
after_success:
  cover -report coveralls
notifications:
  email:
    recipients:
      - dev@maxmind.com
    on_success: change
    on_failure: always
